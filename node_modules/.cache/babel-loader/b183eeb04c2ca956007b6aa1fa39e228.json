{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/poptilec/Documents/GitHub/SES_APP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/poptilec/Documents/GitHub/SES_APP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/poptilec/Documents/GitHub/SES_APP/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./SearchBox.css';import Places from'./Places';import Datepicker from'react-datepicker';import Flights from'./Flights';import FlightTable from'./FlightTable';import'react-datepicker/dist/react-datepicker.css';import'bootstrap/dist/css/bootstrap.min.css';import Currencies from'./Currencies';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SearchBox(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),flights=_useState2[0],setFlights=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showFlights=_useState4[0],setShowFlights=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),places=_useState6[0],setPlaces=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),fromLocation=_useState8[0],setFromLocation=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),toLocation=_useState10[0],setToLocation=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),query=_useState12[0],setQuery=_useState12[1];var _useState13=useState(new Date()),_useState14=_slicedToArray(_useState13,2),startDate=_useState14[0],setStartDate=_useState14[1];var _useState15=useState(new Date()),_useState16=_slicedToArray(_useState15,2),endDate=_useState16[0],setEndDate=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showPlaces=_useState18[0],setShowPlaces=_useState18[1];var _useState19=useState(\"USD\"),_useState20=_slicedToArray(_useState19,2),currency=_useState20[0],setCurrency=_useState20[1];var handleStartDate=function handleStartDate(date){setStartDate(date);};var handleEndDate=function handleEndDate(date){setEndDate(date);};function handleSubmit(e){e.preventDefault();function fetchMyAPI(){return _fetchMyAPI.apply(this,arguments);}function _fetchMyAPI(){_fetchMyAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var reqOptions,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reqOptions={method:'GET',headers:{\"x-rapidapi-key\":\"42a5ad4309msh0f7539296c11895p172628jsn1bac294685a3\",\"x-rapidapi-host\":\"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\",\"useQueryString\":true}};_context.next=3;return fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/?\"+new URLSearchParams({query:query}),reqOptions);case 3:response=_context.sent;_context.next=6;return response.json();case 6:response=_context.sent;console.log(response.Places);setPlaces(response.Places);case 9:case\"end\":return _context.stop();}}},_callee);}));return _fetchMyAPI.apply(this,arguments);}fetchMyAPI();setQuery(\"\");setShowPlaces(true);}function handleSearch(e){e.preventDefault();function findFlights(){return _findFlights.apply(this,arguments);}function _findFlights(){_findFlights=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,reqOptions,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsequotes/v1.0/US/\".concat(currency,\"/en-US/\").concat(fromLocation,\"/\").concat(toLocation,\"/\").concat(startDate.toISOString().substring(0,10));reqOptions={method:'GET',headers:{\"x-rapidapi-key\":\"42a5ad4309msh0f7539296c11895p172628jsn1bac294685a3\",\"x-rapidapi-host\":\"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\",\"useQueryString\":true}};_context2.next=4;return fetch(url,reqOptions);case 4:response=_context2.sent;console.log(url);_context2.next=8;return response.json();case 8:response=_context2.sent;console.log(response);console.log(startDate.toDateString().substring(0,6));console.log(startDate.toISOString().substring(0,10));console.log(startDate.toString());console.log(startDate.valueOf());setFlights(response.Quotes);case 15:case\"end\":return _context2.stop();}}},_callee2);}));return _findFlights.apply(this,arguments);}console.log(currency);console.log(startDate);findFlights();console.log(startDate);setToLocation(\"\");setFromLocation(\"\");setShowFlights(true);}// function doAjaxRequest(){\n//   $.ajax({\n//     url: \"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/\"\n//     data: \n//   })\n// }\nfunction getCurrency(value){setCurrency(value);}return/*#__PURE__*/_jsxs(\"div\",{className:\"searchbox\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"searchForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"destinations\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toFrom\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"queryInput\",children:\"From\"}),/*#__PURE__*/_jsx(\"input\",{id:\"queryInput\",value:fromLocation,onChange:function onChange(e){return setFromLocation(e.target.value);},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toFrom\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"queryInput\",children:\"To\"}),/*#__PURE__*/_jsx(\"input\",{id:\"queryInput\",value:toLocation,onChange:function onChange(e){return setToLocation(e.target.value);},required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"datePickers\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dates\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Depart\"}),/*#__PURE__*/_jsx(Datepicker,{className:\"calender\",selected:startDate,onChange:handleStartDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dates\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Return\"}),/*#__PURE__*/_jsx(Datepicker,{selected:endDate,onChange:handleEndDate})]}),/*#__PURE__*/_jsx(\"button\",{className:\"search\",onClick:handleSearch,children:\"Search Flights\"})]})]}),showFlights?/*#__PURE__*/_jsx(Flights,{quotes:flights,className:\"flightTable\"}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Currencies,{value:currency,sendCurrency:getCurrency})]});}export default SearchBox;","map":{"version":3,"sources":["C:/Users/poptilec/Documents/GitHub/SES_APP/src/components/SearchBox.js"],"names":["React","useEffect","useState","Places","Datepicker","Flights","FlightTable","Currencies","SearchBox","flights","setFlights","showFlights","setShowFlights","places","setPlaces","fromLocation","setFromLocation","toLocation","setToLocation","query","setQuery","Date","startDate","setStartDate","endDate","setEndDate","showPlaces","setShowPlaces","currency","setCurrency","handleStartDate","date","handleEndDate","handleSubmit","e","preventDefault","fetchMyAPI","reqOptions","method","headers","fetch","URLSearchParams","response","json","console","log","handleSearch","findFlights","url","toISOString","substring","toDateString","toString","valueOf","Quotes","getCurrency","value","target"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './SearchBox.css';\r\nimport Places from './Places';\r\nimport Datepicker from 'react-datepicker';\r\nimport Flights from './Flights';\r\nimport FlightTable from './FlightTable';\r\n \r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport Currencies from './Currencies';\r\n\r\nfunction SearchBox() { \r\n  const [flights, setFlights] = useState([])\r\n  const [showFlights, setShowFlights] = useState(false)\r\n  const [places, setPlaces] = useState([])\r\n  const [fromLocation, setFromLocation] = useState(\"\")\r\n  const [toLocation, setToLocation] = useState(\"\")\r\n  const [query, setQuery] = useState(\"\")\r\n  const [startDate, setStartDate] = useState(new Date())\r\n  const [endDate, setEndDate] = useState(new Date())\r\n  const [showPlaces,setShowPlaces] = useState(false)\r\n  const [currency, setCurrency] = useState(\"USD\")\r\n\r\n  const handleStartDate = date => {\r\n    setStartDate(date)\r\n  }\r\n\r\n  const handleEndDate = date => {\r\n    setEndDate(date)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n      e.preventDefault()\r\n      async function fetchMyAPI() {\r\n          const reqOptions = {\r\n              method: 'GET',\r\n              headers: {\r\n                  \"x-rapidapi-key\": \"42a5ad4309msh0f7539296c11895p172628jsn1bac294685a3\",\r\n                  \"x-rapidapi-host\": \"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\",\r\n                  \"useQueryString\": true\r\n              }\r\n          }\r\n          let response = await fetch(\"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/?\" + new URLSearchParams({query: query}), reqOptions)\r\n          response = await response.json()\r\n          console.log(response.Places)\r\n          setPlaces(response.Places)\r\n          \r\n      }\r\n\r\n      fetchMyAPI()\r\n      setQuery(\"\")\r\n      setShowPlaces(true)\r\n  }\r\n\r\n  function handleSearch(e){\r\n    e.preventDefault()\r\n    async function findFlights() {\r\n      const url = `https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/browsequotes/v1.0/US/${currency}/en-US/${fromLocation}/${toLocation}/${startDate.toISOString().substring(0,10)}` \r\n      const reqOptions = {\r\n        method: 'GET',\r\n        headers: {\r\n            \"x-rapidapi-key\": \"42a5ad4309msh0f7539296c11895p172628jsn1bac294685a3\",\r\n            \"x-rapidapi-host\": \"skyscanner-skyscanner-flight-search-v1.p.rapidapi.com\",\r\n            \"useQueryString\": true\r\n        }\r\n      }\r\n      let response = await fetch(url, reqOptions)\r\n      console.log(url)\r\n      response = await response.json();\r\n      console.log(response)\r\n      console.log(startDate.toDateString().substring(0,6))\r\n      console.log(startDate.toISOString().substring(0,10))\r\n      console.log(startDate.toString())\r\n      console.log(startDate.valueOf())\r\n      setFlights(response.Quotes)\r\n\r\n    }\r\n\r\n    console.log(currency)\r\n    console.log(startDate)\r\n    findFlights()\r\n    console.log(startDate)\r\n    setToLocation(\"\")\r\n    setFromLocation(\"\")\r\n    setShowFlights(true)\r\n\r\n    }\r\n\r\n\r\n    \r\n  // function doAjaxRequest(){\r\n  //   $.ajax({\r\n  //     url: \"https://skyscanner-skyscanner-flight-search-v1.p.rapidapi.com/apiservices/autosuggest/v1.0/US/USD/en-US/\"\r\n  //     data: \r\n  //   })\r\n  // }\r\n\r\n  function getCurrency (value) { \r\n    setCurrency(value)\r\n  }\r\n  \r\n    return(\r\n       <div className=\"searchbox\">\r\n          <form className=\"searchForm\" onSubmit={handleSubmit}>\r\n            <div className=\"destinations\">\r\n              <div className=\"toFrom\">\r\n                <label htmlFor=\"queryInput\">From</label>\r\n                <input id=\"queryInput\" value={fromLocation} onChange={e => setFromLocation(e.target.value)} required/>\r\n              </div>\r\n              <div className=\"toFrom\">\r\n                <label htmlFor=\"queryInput\">To</label>\r\n                <input id=\"queryInput\" value={toLocation} onChange={e => setToLocation(e.target.value)} required/>\r\n              </div>\r\n            </div>\r\n            <div className=\"datePickers\">\r\n              <div className=\"dates\">\r\n                <label>Depart</label>\r\n                <Datepicker className =\"calender\"\r\n                  selected={startDate}\r\n                  onChange={handleStartDate}\r\n              /></div>\r\n              <div className=\"dates\">\r\n                <label>Return</label>\r\n                <Datepicker\r\n                  selected={endDate}\r\n                  onChange={handleEndDate}\r\n              /></div>\r\n              <button className=\"search\" onClick ={handleSearch}>Search Flights</button>\r\n            </div>\r\n          </form> \r\n          { showFlights ? <Flights quotes={flights} className=\"flightTable\"></Flights> : <></>}\r\n          {/* { showFlights ? <FlightTable quotes={flights}></FlightTable> : <></>} */}\r\n          <Currencies value={currency} sendCurrency={getCurrency} ></Currencies> \r\n          {/* <select\r\n            value= {currency}\r\n            onChange = {e => setCurrency(e.target.value)}\r\n            >\r\n              <option value = \"USD\">USD</option>\r\n              <option value = \"GBP\">GBP</option>\r\n            </select> */}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SearchBox;"]},"metadata":{},"sourceType":"module"}